<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Wwise Unity Integration: AK::StreamMgr::IAkFileLocationResolver::Open</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
  <div class="navpath"><a class="el" href="namespace_a_k.html">AK</a>::<b>StreamMgr</b>::<a class="el" href="class_a_k_1_1_stream_mgr_1_1_i_ak_file_location_resolver.html">IAkFileLocationResolver</a>
  </div>
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td valign="top">
      <div class="navtab">
        <table>
          <tr><td class="navtab"><a class="qindexHL" href="class_a_k_1_1_stream_mgr_1_1_i_ak_file_location_resolver_abc328bc9dcf4120e8a0f427e287335e5.html#abc328bc9dcf4120e8a0f427e287335e5">Open</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="class_a_k_1_1_stream_mgr_1_1_i_ak_file_location_resolver_a2a56b7d6081c71d06df9c0a3c79750b0.html#a2a56b7d6081c71d06df9c0a3c79750b0">Open</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="class_a_k_1_1_stream_mgr_1_1_i_ak_file_location_resolver_aa43e723e440d9a298fbdcacf59bbf019.html#aa43e723e440d9a298fbdcacf59bbf019">~IAkFileLocationResolver</a></td></tr>
        </table>
      </div>
   </td>
   <td valign="top">
<a class="anchor" id="abc328bc9dcf4120e8a0f427e287335e5"></a><!-- doxytag: member="AK::StreamMgr::IAkFileLocationResolver::Open" ref="abc328bc9dcf4120e8a0f427e287335e5" args="(const AkOSChar *in_pszFileName, AkOpenMode in_eOpenMode, AkFileSystemFlags *in_pFlags, bool &amp;io_bSyncOpen, AkFileDesc &amp;io_fileDesc)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="_common_2_ak_types_8h_a64f7d1f79613cc4dcc49a4efba6caa63.html#a64f7d1f79613cc4dcc49a4efba6caa63">AKRESULT</a> AK::StreamMgr::IAkFileLocationResolver::Open </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_platforms_2_windows_2_ak_types_8h_af48843ed095e0ea7dd05bd1b64070664.html#af48843ed095e0ea7dd05bd1b64070664">AkOSChar</a> *&nbsp;</td>
          <td class="paramname"> <em>in_pszFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_i_ak_stream_mgr_8h_afb72442488d89ecc645c457ff48a90b7.html#afb72442488d89ecc645c457ff48a90b7">AkOpenMode</a>&nbsp;</td>
          <td class="paramname"> <em>in_eOpenMode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_ak_file_system_flags.html">AkFileSystemFlags</a> *&nbsp;</td>
          <td class="paramname"> <em>in_pFlags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&nbsp;</td>
          <td class="paramname"> <em>io_bSyncOpen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_ak_file_desc.html">AkFileDesc</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>io_fileDesc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a file descriptor for a given file name (string). Performs the operations needed to make the file descriptor usable by the other methods of the interface (for e.g. ask the OS for a valid file handle). </p>
<dl class="return"><dt><b>Returns:</b></dt><dd><ul>
<li>AK_Success: A valid file descriptor is returned</li>
<li>AK_FileNotFound: File was not found.</li>
<li>AK_Fail: File could not be open for any other reason. </li>
</ul>
</dd>
<dd>
<ul>
<li>A file descriptor, which contains<ul>
<li>an unique identifier to be used with functions of the low-level IO interface.</li>
<li>the total stream size in bytes.</li>
<li>the offset from the beginning of the file (in blocks).</li>
<li>a device ID, that was obtained through AK::StreamMgr::CreateDevice().</li>
</ul>
</li>
<li>The updated io_bSyncOpen flag depending on the File Resolver's deferred opening policy. </li>
</ul>
</dd></dl>
<dl class="remark"><dt><b>Remarks:</b></dt><dd><ul>
<li>The file descriptor is unique for each stream, and its address remains the same throughout its lifetime. In other words, the value of &amp;in_fileDesc inside Read() or Close() is the same as &amp;out_fileDesc in <a class="el" href="class_a_k_1_1_stream_mgr_1_1_i_ak_file_location_resolver_abc328bc9dcf4120e8a0f427e287335e5.html#abc328bc9dcf4120e8a0f427e287335e5">Open()</a>.</li>
<li><a class="el" href="class_a_k_1_1_stream_mgr_1_1_i_ak_file_location_resolver_abc328bc9dcf4120e8a0f427e287335e5.html#abc328bc9dcf4120e8a0f427e287335e5">Open()</a> is always called first in the client thread.</li>
<li>If io_bSyncOpen is true, file opening must be executed now. If it is false, the File Location Resolver may choose whether it wants open it now, or later from the streaming device's thread. If it wishes to open it now, then it must set io_bSyncOpen to true. Otherwise, it needs to do the following: leave io_bSyncOpen to false, clear out_fileDesc::iFileSize and out_fileDesc::uSector, and set out_fileDesc::deviceID to the streaming device's ID that will handle this file. By returning io_bSyncOpen as false, the Stream Manager will interpret this as a request for deferred file opening, and this function will called again from the streaming device's thread (this time, with this io_bSyncOpen set to true).</li>
<li>All members of out_fileDesc will be cleared upon first call to <a class="el" href="class_a_k_1_1_stream_mgr_1_1_i_ak_file_location_resolver_abc328bc9dcf4120e8a0f427e287335e5.html#abc328bc9dcf4120e8a0f427e287335e5">Open()</a>. </li>
</ul>
</dd></dl>
<dl class="warning"><dt><b>Warning:</b></dt><dd><ul>
<li>It is illegal to return io_bSyncOpen as false if <a class="el" href="class_a_k_1_1_stream_mgr_1_1_i_ak_file_location_resolver_abc328bc9dcf4120e8a0f427e287335e5.html#abc328bc9dcf4120e8a0f427e287335e5">Open()</a> was called with io_bSyncOpen set to true.</li>
<li>Deferred file opening requires allocations in the Stream Manager's small object pool. The File Location Resolver should always choose to open files synchronously if it is fast to do so.</li>
<li>Whether opening is deferred or not, <a class="el" href="namespace_a_k_1_1_memory_mgr_a8296b4fdef0966052beed20b17c2a0bb.html#a8296b4fdef0966052beed20b17c2a0bb">GetBlockSize()</a> is always called right after the first call to <a class="el" href="class_a_k_1_1_stream_mgr_1_1_i_ak_file_location_resolver_abc328bc9dcf4120e8a0f427e287335e5.html#abc328bc9dcf4120e8a0f427e287335e5">Open()</a>, in the client's thread, and is never called again. </li>
</ul>
</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><ul>
<li><a class="el" href="namespace_a_k_1_1_memory_mgr_a8296b4fdef0966052beed20b17c2a0bb.html#a8296b4fdef0966052beed20b17c2a0bb">GetBlockSize()</a></li>
<li>streamingmanager_lowlevel_location </li>
</ul>
</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>in_pszFileName</em>&nbsp;</td><td>File name. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in_eOpenMode</em>&nbsp;</td><td>Open mode. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in_pFlags</em>&nbsp;</td><td>Special flags. Can pass NULL. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>io_bSyncOpen</em>&nbsp;</td><td>If true, the file must be opened synchronously. Otherwise it is left at the File Location Resolver's discretion. Return false if Open needs to be deferred. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>io_fileDesc</em>&nbsp;</td><td>Returned file descriptor. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
    </td>
  </tr>
</table>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Wed Mar 18 16:05:23 2015 for Wwise Unity Integration by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
